---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPageItem from '../components/BlogPageItem.astro';
const pageTitle = 'Blog';
const pageDescription = 'A blog.';

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob('./blog/*.{md,mdx}')).sort(
  (a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
---

<BaseLayout pageTitle={pageTitle} pageDescription={pageDescription}>
  <!-- <h2>Blog</h2> -->
  <section>
    <ul>
      {
        posts.map((post, index) => (
          <li class='mb-8'>
            <BlogPageItem
              key={index}
              post={post}
            />
          </li>
        ))
      }
    </ul>
  </section>
</BaseLayout>